<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>文档</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <link rel="stylesheet" href="../css/layout.css" />
    <style>
       .logo{
       	text-align: center;
       	padding: 40px 0;
       }
       .username{
       	padding: 30px;
       }
       .username i{
       	font-size: 32px;
       	width: 30px;
       	height: 40px;
       	position: relative;
       	top: 10px;
       }
       .phone input{
       	width: 100%;
       	height: 100%;
       	line-height: 40px;
       	border-bottom: 1px solid #DDDDDD;
       	text-indent: 2em;
       	margin-left: 10px;
       }
       .btn{
       	margin: 0 30px;
       	height: 40px;
       	background: #40B5F0;
       	text-align: center;
       	line-height: 40px;
       	color: #FFFFFF;
        margin-top: 10px;
        border-radius: 5px;
       }
       .forget{
       	margin-top: 10px;
       	color: #CACACA;
       	text-align: right;
       	padding-right: 25px;
       }
       .newuser{
       	margin: 40px auto;
       	text-align: center;
       }
       .my_info{
       	height: 100px;
       	background: #FFFFFF;
       	padding-top: 10px;
       }
       .my_info img{
       	height: 100px;
       	padding-left: 15px;
       }
       .person_account dt{
       	 font-size: 18px;
       	 color: #6E6F6F;
       	 padding-left: 20px;
       }
       .person_account dd{
       	  display: inline-block;
       	  font-size: 12px;
       	  margin-left: 20px;
       	  margin-top: 40px;
       }
       .person_account dd span{
       	color: #FE6F0F;
       	font-size: 15px;
       }
       body{
       	background: #F3F3F3;
       }
       .about_person_info{
     	height: 80px;
     	line-height: 80px;
     	border-bottom: 1px solid #ccc;
     	color: #999;
     	font-weight: 700;
     	background: #FFFFFF;
     }
     .about_person_info div img{
     	height: 50px;
     	position: relative;
     	top: 20px;
     	padding-left: 10px;
     	padding-right: 10px;
     }
     .about_person_info div i{
     	font-size: 50px;
     	color: #999;
     }
     .right_icon{
     	text-align: right;
     	padding-right: 10px;
     	margin-top: 15px;
     }
    </style>
</head>
<body>
	<div id="wrap">
	<div id="main">
	<div class="logo">
		<img src="../image/logo.png" width="80px" />
	</div>
	<div class="flex-box username">
		<i class="ct-icon-phone"></i>
		<div class="flex-1 phone">
			<input type="text" placeholder="请输入手机号"  name="username"/>
		</div>
	</div>
	<div class="flex-box username">
		<i class="ct-icon-lock"></i>
		<div class="flex-1 phone">
			<input type="text" placeholder="请输入密码" name="password" />
		</div>
	</div>
	<div class="btn" onclick="openPinfo();">登陆</div>
	<div class="forget">忘记密码？</div>
	<div class="newuser" onclick="openZuce()">新用户？点我注册</div>
	</div>
	</div>
	<script type="text/template" template="loginsucess">
	
	<div class="flex-box my_info">
		<div class="flex-1">
			<img src="../image/index_1.gif"  />
		</div>
		<div class="flex-2 person_account">
			<dl>
				<dt>wei s叶</dt>
				<dd>可用积分:<span>1600</span></dd>
				<dd>账户余额:<span>385.00</span>元</dd>
			</dl>
		</div>
	</div>
	<div class="flex-box about_person_info" style="margin-top: 10px;" onclick="openSet();">
		<div class="flex-3">
			<img src="../image/index_me1.gif"  />
			个人设置
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info">
		<div class="flex-3">
			<img src="../image/index_me2.gif"  />
			消息记录
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info" onclick="openAdduser();">
		<div class="flex-3">
			<img src="../image/index_me5.gif"  />
			添加用户信息
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info" onclick="viewInfo();">
		<div class="flex-3">
			<img src="../image/index_me1.gif"  />
			查询用户信息
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info">
		<div class="flex-3">
			<img src="../image/index_me3.gif"  />
			我的评论
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info" onclick="fundRecord();">
		<div class="flex-3">
			<img src="../image/index_me4.gif"  />
			资金记录
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info" onclick="openCash();">
		<div class="flex-3">
			<img src="../image/index_me5.gif"  />
			提现
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	<div class="flex-box about_person_info" onclick="openSystem();" style="border-top: 10px solid #F3F3F3">
		<div class="flex-3">
			<img src="../image/index_me6.png"  />
			系统设置
		</div>	
		<div class="flex-1 right_icon">
			<i class="ct-icon-angle-right"></i>
		</div>
	</div>
	</script>
	<script type="text/javascript" src="../script/api.js" ></script>
	<script type="text/javascript" src="../script/doT.min.js" ></script>
	<script>
	    function openZuce(){
	        api.openWin({
		    name: 'zhuce',
		    url: api.wgtRootDir +'/html/window/zhuce_head.html',
		});
	    }
	    function openPinfo(){
			var username=$api.val($api.dom('[name=username]'));
	    	var password=$api.val($api.dom('[name=password]'));
			if(username){
				if(!/^1[3,5,7,8]\d{9}$/.test(username)){
					api.toast({
				    msg: '请输入正确的手机号码',
				    duration: 2000,
				    location: 'middle'
				});
				return;
				}
			}else{
				api.toast({
				    msg: '手机号码不能为空',
				    duration: 2000,
				    location: 'middle'
				});
				return;
			}
			if(!password){
				api.toast({
			    msg: '密码不能为空',
			    duration: 2000,
			    location: 'middle'
			});
			return;
			}
			api.ajax({
		    url: 'http://ikeo.com.cn/index.php/Home/App/login',
		    method: 'post',
		    data: {
		        values: { 
		            username: username,
		            password: password
		        }
		    }
		},function(ret, err){
			//当数据提交成功过后，后台响应给我们的东西
		    if (ret) {
		    	//后台响应回来的有两个参数，一个是flag（成功或者失败）1表示注册成功，-1表示注册失败
				if(ret.flag==1){
				    $api.getStorage("uid");
					$api.html($api.dom("#main"),doT.template($api.html($api.dom("[template=loginsucess]")))(""));
				}else{
					//当我们注册失败后，打印出失败的原因
					alert(ret.msg);
				}
				
		    } else {
		         api.alert({msg:JSON.stringify(err)});
		    }
		});
	}
	    function openSet(){
			api.openWin({
				name: 'set_frame1',
		        url: api.wgtRootDir +'/html/window/win_l_setmy_info.html',
			});
		}
	     function openCash(){
			api.openWin({
				name: 'cash_frame',
		        url: api.wgtRootDir +'/html/window/win_l_cash.html',
			});
		}
	     function openSystem(){
	     	api.openWin({
				name: 'system_frame',
		        url: api.wgtRootDir +'/html/window/win_l_system_setting.html',
		     });
	     }
	     function openAdduser(){
	     	api.openWin({
				name: 'add_frame123',
		        url: api.wgtRootDir +'/html/window/win_l_add_user.html',
		     });
	     }
	     function viewInfo(){
	     		api.openWin({
				name: 'view_frame',
		        url: api.wgtRootDir +'/html/window/win_l_my_info.html',
		     });
	     }
	     function fundRecord(){
	     	api.openWin({
				name: 'fund_frame',
		        url: api.wgtRootDir +'/html/window/win_l_fund_record.html',
		     });
	     }
	</script>
	
		

</body>
</html>